(this["webpackJsonpsocio-frontend"]=this["webpackJsonpsocio-frontend"]||[]).push([[0],{102:function(e,t){},105:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),o=a(8),i=(a(69),a(2)),l=a(3),u=a(5),m=a(4),d=a(56),p="http://codeial.com:8000/api/v2",h={login:"".concat(p,"/users/login"),signup:"".concat(p,"/users/signup"),editProfile:function(){return"".concat(p,"/users/edit")},fetchPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return"".concat(p,"/posts?page=").concat(e,"&limit=").concat(t)},userProfile:function(e){return"".concat(p,"/users/").concat(e)},userFriends:function(){return"".concat(p,"/friendship/fetch_user_friends")},addFriend:function(e){return"".concat(p,"/friendship/create_friendship?user_id=").concat(e)},removeFriend:function(e){return"".concat(p,"/friendship/remove_friendship?user_id=").concat(e)},createNewPost:function(){return"".concat(p,"/posts/create")},createComment:function(){return"".concat(p,"/comments/")},toggleLike:function(e,t){return"".concat(p,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},searchUser:function(e){return"".concat(p,"/users/search?text=").concat(e)}};function f(e){var t=[];for(var a in e){var n=encodeURIComponent(a),r=encodeURIComponent(e[a]);t.push(n+"="+r)}return console.log("URLencoded form ",t.join("&")),t.join("&")}function g(){return localStorage.getItem("token")}function E(){return function(e){var t=h.fetchPosts();fetch(t).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"UPDATE_POSTS",posts:t.data.posts})}))}}function v(e,t){return function(a){var n=h.createComment();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())},body:f({content:e,post_id:t})}).then((function(e){return e.json()})).then((function(e){e.success&&a(function(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}}(e.data.comment,t))}))}}function b(e,t,a){return function(n){var r=h.toggleLike(e,t);fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}}).then((function(e){return e.json()})).then((function(t){console.log("LIKEDATAAA",t),t.success&&n(function(e,t){return{type:"UPDATE_POST_LIKE",postId:e,userId:t}}(e,a))}))}}var O=a(9),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.comment;return console.log("CCCCCCCCCCOOOOOOOOOMMMMMMMMMMEEEEEEEENNNNNNNNTTTTTTTT",e),void 0===e?r.a.createElement("div",null," "):r.a.createElement("div",{className:"post-comment-item"},r.a.createElement("div",{className:"post-comment-header"},r.a.createElement("span",{className:"post-comment-author"},e.user.name),r.a.createElement("span",{className:"post-comment-time"},"a minute ago"),r.a.createElement("span",{className:"post-comment-likes"},e.likes.length," likes")),r.a.createElement("div",{className:"post-comment-content"},e.content))}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleCommentChange=function(e){n.setState({comment:e.target.value})},n.handleCommentAdd=function(e){"Enter"===e.key&&(n.props.dispatch(v(n.state.comment,n.props.post._id)),n.setState({comment:""}))},n.handlePostLike=function(){var e=n.props,t=e.post,a=e.user;n.props.dispatch(b(t._id,"Post",a._id))},n.state={comment:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.user,n=t.likes.includes(a._id);return console.log("*****************************",this.props),r.a.createElement("div",null,r.a.createElement("div",{className:"post-wrapper",key:t._id},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"post-avatar"},r.a.createElement(O.b,{to:"/user/".concat(t.user._id)},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})),r.a.createElement("div",null,r.a.createElement("span",{className:"post-author"},t.user.name),r.a.createElement("span",{className:"post-time"},"a minute ago"))),r.a.createElement("div",{className:"post-content"},t.content),r.a.createElement("div",{className:"post-actions"},r.a.createElement("button",{className:"post-like no-btn",onClick:this.handlePostLike},n?r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/325/325072.svg",alt:"likes-icon"}):r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/1077/1077035.svg",alt:"likes-icon"}),r.a.createElement("span",null,t.likes.length)),r.a.createElement("div",{className:"post-comments-icon"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/1380/1380338.svg",alt:"comments-icon"}),r.a.createElement("span",null,t.comments.length))),r.a.createElement("div",{className:"post-comment-box"},r.a.createElement("input",{placeholder:"Start typing a comment",onChange:this.handleCommentChange,onKeyPress:this.handleCommentAdd})),r.a.createElement("div",{className:"post-comments-list"},r.a.createElement("div",{className:"post-comments-item"},t.comments.map((function(e){return r.a.createElement(C,{comment:e,postId:t._id})})))))))}}]),a}(n.Component);var N=Object(o.b)((function(e){return{user:e.auth.user}}))(S),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",{className:"posts-list"},r.a.createElement(R,null),e.map((function(e){return r.a.createElement(N,{post:e,key:e._id})})))}}]),a}(n.Component);function y(e,t,a,n){return function(r){fetch(h.signup,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f({email:e,password:t,confirm_password:a,name:n})}).then((function(e){return e.json()})).then((function(e){(console.log("Data",e),e.success)?r({type:"SIGNUP_SUCCESS",user:e.data.user}):r({type:"SIGNUP_FAIL",error:e.message})}))}}function _(){return{type:"SIGNUP_START"}}function I(e){return{type:"FETCH_SEARCH_RESULTSSUCCESS",users:e}}function T(e){return function(t){var a=h.searchUser(e);fetch(a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}}).then((function(e){return e.json()})).then((function(e){console.log("Search Data"),e.success?t(I(e.data.users)):t(I([]))}))}}var w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).logout=function(){localStorage.removeItem("token"),e.props.dispatch({type:"LOGOUT"})},e.handleSearchInput=function(t){var a=t.target.value;e.props.dispatch(T(a))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.results;return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"left-div"},r.a.createElement(O.b,{to:"/"},r.a.createElement("img",{className:"logo",src:"https://image.flaticon.com/icons/svg/3221/3221956.svg",alt:"logo"}))),r.a.createElement("div",{className:"search-container"},r.a.createElement("img",{className:"search-icon",src:"https://image.flaticon.com/icons/svg/483/483356.svg",alt:"search-icon"}),r.a.createElement("input",{placeholder:"Search",onChange:this.handleSearchInput}),a.length>0&&r.a.createElement("div",{className:"search-results"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{className:"search-results-row"},r.a.createElement(O.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"}),r.a.createElement("span",null,e.name)))}))))),r.a.createElement("div",{className:"right-nav"},t.isLoggedin&&r.a.createElement("div",{className:"user"},r.a.createElement(O.b,{to:"/settings"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp",id:"user-dp"})),r.a.createElement("span",null,t.user.name)),r.a.createElement("div",{className:"nav-links"},r.a.createElement("ul",null,!t.isLoggedin&&r.a.createElement("li",null,r.a.createElement(O.b,{to:"/login"},"Log in")),!t.isLoggedin&&r.a.createElement("li",null,r.a.createElement(O.b,{to:"/signup"},"Signup")),t.isLoggedin&&r.a.createElement("li",{onClick:this.logout},"Logout")))))}}]),a}(n.Component);var A=Object(o.b)((function(e){return{auth:e.auth,results:e.search.results}}))(w),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.props,"FREINDSLIST VIEW<<<<<<<<<<<<<<<<<<<<<<<<<"),r.a.createElement("div",null,r.a.createElement(O.b,{className:"friends-item",to:"user/".concat(this.props.friend._id)},r.a.createElement("div",{className:"friends-img"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})),r.a.createElement("div",{className:"friends-name"},this.props.friend.email)))}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.friends;return console.log("FFFFFFRIIIIIIENNNNNNNNDLLLLLIST",e),r.a.createElement("div",{className:"friends-list"},r.a.createElement("div",{className:"header"},"My Friends "),e&&0===e.length&&r.a.createElement("div",{className:"no-friends"},"No friends found!"),e&&e.map((function(e){return r.a.createElement(k,{friend:e.to_user,key:e._id})})))}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({content:e.target.value})},n.handleClick=function(){var e;n.props.dispatch((e=n.state.content,function(t){var a=h.createNewPost();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())},body:f({content:e})}).then((function(e){return e.json()})).then((function(e){console.log(e,"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%CREATEPOST"),e.success&&t({type:"CREATE_POST",post:e.data.post})}))}))},n.state={content:""},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-post"},r.a.createElement("textarea",{className:"add-post",onChange:this.handleChange,onClick:this.handleClick}),r.a.createElement("div",null,r.a.createElement("button",{id:"add-post-btn",onClick:this.handleClick},"Add Post")))}}]),a}(n.Component),R=Object(o.b)()(L),F=a(15),U=a(27),D=a(57),M=a.n(D),$=(a(105),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setupConnections=function(){var e=n.socket,t=Object(U.a)(n);n.socket.on("connect",(function(){console.log("CONNECTION ESTABLISHED"),e.emit("join_room",{user_email:this.userEmail,chatroom:"codeial"}),e.on("user_joined",(function(e){console.log("NE USER JOINED",e)}))})),n.socket.on("receive_message",(function(e){var a=t.state.messages,n={};n.content=e.message,e.user_email===t.userEmail&&(n.self=!0),t.setState({messages:[].concat(Object(F.a)(a),[n]),typedMessage:""})}))},n.handleSubmitMessage=function(){var e=n.state.typedMessage;console.log("send message"),e&&n.userEmail&&n.socket.emit("send_message",{message:e,user_email:n.userEmail,chatroom:"codeial"})},n.state={messages:[],typedMessage:""},n.socket=M.a.connect("http://54.237.158.65:5000"),n.userEmail=e.user.email,n.userEmail&&n.setupConnections(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.messages,n=t.typedMessage;return r.a.createElement("div",{className:"chat-container"},r.a.createElement("div",{className:"chat-header"},"Chat",r.a.createElement("img",{src:"https://www.iconsdb.com/icons/preview/white/minus-5-xxl.png",alt:"",height:17})),r.a.createElement("div",{className:"chat-messages"},a.map((function(e){return r.a.createElement("div",{className:e.self?"chat-bubble self-chat":"chat-bubble other-chat"},e.content)}))),r.a.createElement("div",{className:"chat-footer"},r.a.createElement("input",{type:"text",value:n,onChange:function(t){return e.setState({typedMessage:t.target.value})}}),r.a.createElement("button",{onClick:this.handleSubmitMessage},"Submit")))}}]),a}(n.Component));var x=Object(o.b)((function(e){return{user:e.auth.user}}))($),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.posts,a=e.friends,n=e.isLoggedin;return r.a.createElement("div",{className:"home"},r.a.createElement(j,{posts:t}),n&&r.a.createElement(P,{friends:a}),n&&r.a.createElement(x,null))}}]),a}(n.Component);var H=function(e){return r.a.createElement("div",null,"404!!! Looks Like You Lost the Way ....")},B=a(7),z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleFormSubmit=function(e){var t=n.state,a=t.email,r=t.password;e.preventDefault(),console.log(n.state),a&&r&&n.props.dispatch(function(e,t){return function(a){a({type:"LOGIN_START"}),fetch(h.login,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log("data",e),e.success?(localStorage.setItem("token",e.data.token),a({type:"LOGIN_SUCCESS",user:e.data.user})):a({type:"LOGIN_FAIL",error:e.message})}))}}(a,r))},n.handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.state={email:"",password:""},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEARAUTHSTATE"})}},{key:"render",value:function(){var e=this.props.auth,t=e.error,a=e.inProgress,n=e.isLoggedin,s=(this.props.location.state||{from:{pathname:"/home"}}).from;return console.log("LOGN PROPS",this.props),n?r.a.createElement(B.a,{to:s}):r.a.createElement("form",{className:"login-form"},r.a.createElement("span",{className:"login-signup-header"}," Login"),t&&r.a.createElement("div",{className:"alert error-dailog"},t),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"email",placeholder:"Email",onChange:this.handleEmailChange,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:this.handlePasswordChange,required:!0})),r.a.createElement("div",{className:"field"},a?r.a.createElement("button",{onClick:this.handleFormSubmit,disabled:a},"Loging in ..."):r.a.createElement("button",{onClick:this.handleFormSubmit,disabled:a},"Login")))}}]),a}(n.Component);var q=Object(o.b)((function(e){return{auth:e.auth}}))(z),W=a(19),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(W.a)({},e,t))},n.handleSave=function(){var e=n.state,t=e.password,a=e.confirmPassword,r=e.name,s=n.props.auth.user;n.props.dispatch(function(e,t,a,n){return function(r){var s=h.editProfile();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())},body:f({name:e,password:t,confirm_password:a,id:n})}).then((function(e){return e.json()})).then((function(e){if(console.log("PROFILE EDIT",e),e.success)return r({type:"EDIT_USER_SUCCESS",user:e.data.user}),void(e.data.token&&localStorage.setItem("token",e.data.token));r({type:"EDIT_USER_FAIL",error:e.message})}))}}(r,t,a,s._id))},console.log(e),n.state={name:e.auth.user.name,password:"",confirmPassword:"",editMode:!1},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEARAUTHSTATE"})}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.user,n=t.error,s=this.state.editMode;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})),n&&r.a.createElement("div",{className:"alert error-dailog"}," ",n," "),0==n&&r.a.createElement("div",{className:"alert success-dailog"}," Successfully Updated "),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Email"),r.a.createElement("div",{className:"field-value"},a.email)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"name"),s?r.a.createElement("input",{type:"text",onChange:function(t){return e.handleChange("name",t.target.value)},value:this.state.name}):r.a.createElement("div",{className:"field-value"},a.name)),s&&r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"New password"),r.a.createElement("input",{type:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})),s&&r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Confirm password"),r.a.createElement("input",{type:"password",onChange:function(t){return e.handleChange("confirmPassword",t.target.value)},value:this.state.confirmPassword})),r.a.createElement("div",{className:"btn-grp"},s?r.a.createElement("button",{className:"button save-btn",onClick:this.handleSave},"Save"):r.a.createElement("button",{className:"button edit-btn",onClick:function(){return e.handleChange("editMode",!0)}},"Edit profile"),s&&r.a.createElement("div",{className:"go-back",onClick:function(){return e.handleChange("editMode",!1)}},"Go back")))}}]),a}(n.Component);var J=Object(o.b)((function(e){return{auth:e.auth}}))(K),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e,t){n.setState(Object(W.a)({},e,t))},n.onFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password,s=t.confirmPassword,c=t.name;a&&r&&s&&c&&(n.props.dispatch(_),n.props.dispatch(y(a,r,s,c)))},n.state={email:"",name:"",password:"",confirmPassword:""},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEARAUTHSTATE"})}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.inProgress,n=t.error;return t.isLoggedin?r.a.createElement(B.a,{to:"/home"}):r.a.createElement("form",{className:"login-form"},r.a.createElement("span",{className:"login-signup-header"}," Signup"),n&&r.a.createElement("div",{className:"alert error-dailog"},n),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Name",type:"text",required:!0,onChange:function(t){return e.handleInputChange("name",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Email",type:"email",required:!0,onChange:function(t){return e.handleInputChange("email",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Confirm password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("confirmPassword",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("password",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("button",{onClick:this.onFormSubmit,disabled:a},"Signup")))}}]),a}(n.Component),Y=Object(o.b)((function(e){return{auth:e.auth}}))(V),Q=a(21),X=a.n(Q),Z=a(38);function ee(e){return function(t){t({type:"FETCH_USER_PROFILE_START"});var a=h.userProfile(e);fetch(a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}}).then((function(e){return e.json()})).then((function(e){t({type:"USER_PROFILE_SUCCESS",user:e.data.user})}))}}var te=a(1),ae={user:{},error:null,success:null,inProgress:!1};function ne(e){return function(e){var t=h.userFriends();fetch(t,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}}).then((function(e){return e.json()})).then((function(t){console.log(t.data.friends,"DDDDDDDDAAAAAAAAAAATAAAAAAAAAAAA"),e({type:"FETCH_USER_FRIENDS_SUCCESS",friends:t.data.friends})})).catch((function(e){console.log(e,"~~~~~~~~~~~~~~~ERROR")}))}}var re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkIfUserIsAFriend=function(){console.log("this.props",n.props);var e=n.props,t=e.match,a=e.friends,r=t.params.userId;return-1!==a.map((function(e){return e.to_user._id})).indexOf(r)},n.handleAddFriendClick=Object(Z.a)(X.a.mark((function e(){var t,a,r,s,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Clicked"),t=n.props.match.params.userId,console.log(t),a=h.addFriend(t),r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}},e.next=7,fetch(a,r);case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,console.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$",c),c.success?(n.setState({success:!0,successMessage:c.message}),n.props.dispatch({type:"ADD_FRIEND",friend:c.data.friendship})):n.setState({success:null,error:c.message});case 13:case"end":return e.stop()}}),e)}))),n.handleRemoveFriend=Object(Z.a)(X.a.mark((function e(){var t,a,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.removeFriend(n.props.match.params.userId),console.log(t),a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(g())}},e.next=5,fetch(t,a);case 5:return r=e.sent,e.next=8,r.json();case 8:(s=e.sent).success?(n.setState({success:!0,successMessage:s.message}),n.props.dispatch({type:"REMOVE_FRIEND",userId:n.props.match.params.userId})):n.setState({success:null,error:s.message});case 10:case"end":return e.stop()}}),e)}))),n.state={success:null,error:null,successMessage:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params.userId&&(console.log("User Profile is to be showed"),this.props.dispatch(ee(e.params.userId)))}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=this.props.match.params;t&&a&&t.userId!==a.userId&&this.props.dispatch(ee(a.userId))}},{key:"render",value:function(){console.log("PROPS",this.props),console.log("PROILE",this.props);var e=this.props.profile.user;if(console.log("**********************inProgress",this.props.profile.inProgress),this.props.profile.inProgress)return r.a.createElement("div",null,"Loading ");var t=this.state,a=t.error,n=t.success,s=this.checkIfUserIsAFriend();return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Name"),r.a.createElement("div",{className:"field-value"},e.name)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Email"),r.a.createElement("div",{className:"field-value"},e.email)),r.a.createElement("div",{className:"btn-grp"},s?r.a.createElement("button",{className:"button save-btn",onClick:this.handleRemoveFriend},"Remove Friend"):r.a.createElement("button",{className:"button save-btn",onClick:this.handleAddFriendClick},"Add Friend"),n&&r.a.createElement("div",{className:" alert  success-dailog"}," ",this.state.successMessage),a&&r.a.createElement("div",{className:" alert  error-dailog"}," ",a)))}}]),a}(n.Component);var se=Object(o.b)((function(e){return{profile:e.profile,friends:e.friends}}))(re),ce=function(e){var t=e.isLoggedin,a=e.path,n=e.component;return console.log("PRivate route Props",e),r.a.createElement(B.b,{path:a,render:function(e){return console.log("Settings",e),t?r.a.createElement(n,e):r.a.createElement(B.a,{to:{pathname:"/login",state:{from:e.location}}})}})},oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(E());var e=localStorage.getItem("token");if(console.log(e),e){var t=d(e);console.log(t),this.props.dispatch(function(e){return{type:"AUTHENTICATE_USER",user:e}}({email:t.email,_id:t._id,name:t.name})),this.props.dispatch(ne())}}},{key:"render",value:function(){console.log("PROPS APP",this.props);var e=this.props,t=e.posts,a=e.auth,n=e.friends;return console.log("FFFFFFFFRIEEEEEEEENDS",n),r.a.createElement(O.a,{basename:"/socio-app"},r.a.createElement("div",null,r.a.createElement(A,null)),r.a.createElement(B.d,null,r.a.createElement(B.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(G,Object.assign({},e,{posts:t,isLoggedin:a.isLoggedin,friends:n}))}}),r.a.createElement(B.b,{path:"/login",component:q}),r.a.createElement(B.b,{path:"/signup",component:Y}),r.a.createElement(ce,{path:"/settings",component:J,isLoggedin:a.isLoggedin}),r.a.createElement(ce,{path:"/user/:userId",component:se,isLoggedin:a.isLoggedin}),r.a.createElement(B.b,{component:H})))}}]),a}(r.a.Component);var ie=Object(o.b)((function(e){return{posts:e.posts,auth:e.auth,friends:e.friends}}))(oe),le=a(16),ue=a(58);var me={user:{},error:null,isLoggedin:!1,inProgress:!1},de=[];var pe={results:[]};var he=Object(le.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_POSTS":return t.posts;case"CREATE_POST":return[t.post].concat(Object(F.a)(e));case"ADD_COMMENT":var a=e.map((function(e){return e._id===t.postId?Object(te.a)(Object(te.a)({},e),{},{comments:[t.comment].concat(Object(F.a)(e.comments))}):e}));return a;case"UPDATE_POST_LIKE":var n=e.map((function(e){return e._id===t.postId?Object(te.a)(Object(te.a)({},e),{},{likes:[].concat(Object(F.a)(e.likes),[t.userId])}):e}));return n;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEARAUTHSTATE":return Object(te.a)(Object(te.a)({},e),{},{error:null});case"LOGIN_START":case"SIGNUP_START":return Object(te.a)(Object(te.a)({},e),{},{inProgress:!0});case"LOGIN_SUCCESS":case"SIGNUP_SUCCESS":return Object(te.a)(Object(te.a)({},e),{},{user:t.user,isLoggedin:!0,inProgress:!1,error:null});case"LOGIN_FAIL":case"SIGNUP_FAIL":return Object(te.a)(Object(te.a)({},e),{},{inProgress:!1,error:t.error});case"AUTHENTICATE_USER":return Object(te.a)(Object(te.a)({},e),{},{user:t.user,isLoggedin:!0,error:null});case"LOGOUT":return Object(te.a)(Object(te.a)({},e),{},{user:{},isLoggedin:!1});case"EDIT_USER_SUCCESS":return Object(te.a)(Object(te.a)({},e),{},{user:t.user,error:!1});case"EDIT_USER_FAIL":return Object(te.a)(Object(te.a)({},e),{},{error:t.error});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_PROFILE_SUCCESS":return Object(te.a)(Object(te.a)({},e),{},{success:!0,user:t.user,inProgress:!1});case"USER_PROFILE_FAIL":return Object(te.a)(Object(te.a)({},e),{},{error:t.error,inProgress:!1});case"FETCH_USER_PROFILE_START":return Object(te.a)(Object(te.a)({},e),{},{inProgress:!0});default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_FRIENDS_SUCCESS":return Object(F.a)(t.friends);case"ADD_FRIEND":return e.concat(t.friend);case"REMOVE_FRIEND":var a=e.filter((function(e){return e.to_user._id!=t.userId}));return a;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SEARCH_RESULTSSUCCESS":return Object(te.a)(Object(te.a)({},e),{},{results:t.users});default:return e}}}),fe=a(59),ge=a.n(fe);var Ee=Object(le.d)(he,Object(le.a)(ue.a,ge.a));console.log(Ee.getState()),c.a.render(r.a.createElement(o.a,{store:Ee},r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null))),document.getElementById("root"))},60:function(e,t,a){e.exports=a(107)},69:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.4fb4a586.chunk.js.map